<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.shmashine.api.dao.BizFaultDefinition0902Dao">
    <resultMap type="com.shmashine.common.entity.TblFaultDefinition0902" id="TblFaultDefinition0902ResultMap">
        <result property="faultDefinitionId" column="fault_definition_id" jdbcType="VARCHAR"/>
        <result property="faultType" column="fault_type" jdbcType="VARCHAR"/>
        <result property="faultName" column="fault_name" jdbcType="VARCHAR"/>
        <result property="faultSecondType" column="fault_second_type" jdbcType="VARCHAR"/>
        <result property="faultSecondName" column="fault_second_name" jdbcType="VARCHAR"/>
        <result property="resolve" column="resolve" jdbcType="VARCHAR"/>
        <result property="remark" column="remark" jdbcType="VARCHAR"/>
        <result property="level" column="level" jdbcType="INTEGER"/>
        <result property="levelName" column="level_name" jdbcType="VARCHAR"/>
        <result property="saveVideo" column="save_video" jdbcType="INTEGER"/>
        <result property="saveImage" column="save_image" jdbcType="INTEGER"/>
        <result property="filterFlag" column="filter_flag" jdbcType="OTHER"/>
        <result property="uncivilizedBehaviorFlag" column="uncivilized_behavior_flag" jdbcType="INTEGER"/>
        <result property="platformType" column="platform_type" jdbcType="VARCHAR"/>
        <result property="elevatorType" column="elevator_type" jdbcType="INTEGER"/>
        <result property="sensorType" column="sensor_type" jdbcType="INTEGER"/>
        <result property="createTime" column="create_time" jdbcType="TIMESTAMP"/>
        <result property="modifyTime" column="modify_time" jdbcType="TIMESTAMP"/>
        <result property="createUserId" column="create_user_id" jdbcType="VARCHAR"/>
        <result property="modifyUserId" column="modify_user_id" jdbcType="VARCHAR"/>
        <result property="delFlag" column="del_flag" jdbcType="INTEGER"/>
    </resultMap>

    <sql id="table_field">
        fault_definition_id
        , fault_type, fault_name, fault_second_type, fault_second_name, resolve, remark, level, level_name, save_video, save_image, filter_flag, uncivilized_behavior_flag, platform_type, elevator_type, sensor_type, create_time, modify_time, create_user_id, modify_user_id, del_flag
    </sql>

    <!-- 根据平台 和 故障code 查找故障名称 -->
    <select id="getFaultDefinitionByCodeAndPlatformType" resultType="java.lang.String" parameterType="java.lang.String">
        select fault_name
        from tbl_fault_definition_0902
        where platform_type = #{platformType}
          and fault_type = #{code}
    </select>

    <!-- 根据平台 和 故障code 查找故障名称 -->
    <select id="getFaultDefinitionSearch" resultMap="TblFaultDefinition0902ResultMap">
        select
        <include refid="table_field"/>
        from tbl_fault_definition_0902
        where platform_type = #{eventType} and elevator_type = #{elevatorType}
        GROUP BY fault_type
        order by fault_type
    </select>

    <!-- 根据平台 和 故障code 查找故障名称 -->
    <select id="getDefinitionUncivilizedBehaviorSearch" resultMap="TblFaultDefinition0902ResultMap">
        select
        <include refid="table_field"/>
        from tbl_fault_definition_0902
        where uncivilized_behavior_flag = 1
    </select>


</mapper>
