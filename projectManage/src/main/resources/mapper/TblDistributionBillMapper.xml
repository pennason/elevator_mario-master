<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shmashine.pm.api.dao.TblDistributionBillDao">
    <resultMap id="BaseResultMap" type="com.shmashine.pm.api.entity.TblDistributionBill">
        <id column="v_distribution_bill_id" jdbcType="VARCHAR" property="vDistributionBillId"/>
        <result column="v_distribution_task_id" jdbcType="VARCHAR" property="vDistributionTaskId"/>
        <result column="v_project_id" jdbcType="VARCHAR" property="vProjectId"/>
        <result column="v_village_id" jdbcType="VARCHAR" property="vVillageId"/>
        <result column="v_elevator_id" jdbcType="VARCHAR" property="vElevatorId"/>
        <result column="v_elevator_equipment_id" jdbcType="VARCHAR" property="vElevatorEquipmentId"/>
        <result column="v_distributer_name" jdbcType="VARCHAR" property="vDistributerName"/>
        <result column="v_verify_code" jdbcType="VARCHAR" property="vVerifyCode"/>
        <result column="v_elevator_code" jdbcType="VARCHAR" property="vElevatorCode"/>
        <result column="i_cube_count" jdbcType="BIT" property="iCubeCount"/>
        <result column="v_connect_adapter" jdbcType="VARCHAR" property="vConnectAdapter"/>
        <result column="v_connect_mode" jdbcType="VARCHAR" property="vConnectMode"/>
        <result column="i_plc_cable" jdbcType="INTEGER" property="iPlcCable"/>
        <result column="i_plc_cable_count" jdbcType="INTEGER" property="iPlcCableCount"/>
        <result column="v_4g_router_mode" jdbcType="VARCHAR" property="v4gRouterMode"/>
        <result column="v_4g_router_ip" jdbcType="VARCHAR" property="v4gRouterIp"/>
        <result column="i_4g_router_count" jdbcType="INTEGER" property="i4gRouterCount"/>
        <result column="v_4g_router_manufactor" jdbcType="VARCHAR" property="v4gRouterManufactor"/>
        <result column="v_router_mode" jdbcType="VARCHAR" property="vRouterMode"/>
        <result column="v_router_ip" jdbcType="VARCHAR" property="vRouterIp"/>
        <result column="i_router_count" jdbcType="INTEGER" property="iRouterCount"/>
        <result column="v_router_manufactor" jdbcType="VARCHAR" property="vRouterManufactor"/>
        <result column="v_4g_router_airwire_spec" jdbcType="VARCHAR" property="v4gRouterAirwireSpec"/>
        <result column="v_4g_router_airwire_manufactor" jdbcType="VARCHAR" property="v4gRouterAirwireManufactor"/>
        <result column="i_camera" jdbcType="INTEGER" property="iCamera"/>
        <result column="v_camera_mode" jdbcType="VARCHAR" property="vCameraMode"/>
        <result column="v_camera_manufactor" jdbcType="VARCHAR" property="vCameraManufactor"/>
        <result column="v_4g_module_mode" jdbcType="VARCHAR" property="v4gModuleMode"/>
        <result column="v_4g_module_manufactor" jdbcType="VARCHAR" property="v4gModuleManufactor"/>
        <result column="v_iot_network_card" jdbcType="VARCHAR" property="vIotNetworkCard"/>
        <result column="v_iot_network_card_operator" jdbcType="VARCHAR" property="vIotNetworkCardOperator"/>
        <result column="i_magnet_sensor" jdbcType="INTEGER" property="iMagnetSensor"/>
        <result column="i_magnet_door_count" jdbcType="INTEGER" property="iMagnetDoorCount"/>
        <result column="i_temper_sensor_count" jdbcType="INTEGER" property="iTemperSensorCount"/>
        <result column="i_body_sensor" jdbcType="INTEGER" property="iBodySensor"/>
        <result column="v_body_sensor_mode" jdbcType="VARCHAR" property="vBodySensorMode"/>
        <result column="i_floor_sensor" jdbcType="INTEGER" property="iFloorSensor"/>
        <result column="v_floor_sensor_workmode" jdbcType="VARCHAR" property="vFloorSensorWorkmode"/>
        <result column="v_floor_sensor_mode" jdbcType="VARCHAR" property="vFloorSensorMode"/>
        <result column="v_short_cable_length" jdbcType="VARCHAR" property="vShortCableLength"/>
        <result column="v_short_cable_count" jdbcType="VARCHAR" property="vShortCableCount"/>
        <result column="i_long_cable_length" jdbcType="INTEGER" property="iLongCableLength"/>
        <result column="i_long_cable_count" jdbcType="INTEGER" property="iLongCableCount"/>
        <result column="v_power_supply" jdbcType="VARCHAR" property="vPowerSupply"/>
        <result column="i_power_supply_count" jdbcType="INTEGER" property="iPowerSupplyCount"/>
        <result column="v_power_supply_brand" jdbcType="VARCHAR" property="vPowerSupplyBrand"/>
        <result column="v_patch_borad" jdbcType="VARCHAR" property="vPatchBorad"/>
        <result column="i_patch_borad_count" jdbcType="INTEGER" property="iPatchBoradCount"/>
        <result column="v_patch_borad_brand" jdbcType="VARCHAR" property="vPatchBoradBrand"/>
        <result column="i_patch_borad_length" jdbcType="INTEGER" property="iPatchBoradLength"/>
        <result column="i_airwire_cover_count" jdbcType="INTEGER" property="iAirwireCoverCount"/>
        <result column="i_carroof_electricity_sensor" jdbcType="INTEGER" property="iCarroofElectricitySensor"/>
        <result column="v_carroof_electricity_sensor_mode" jdbcType="VARCHAR" property="vCarroofElectricitySensorMode"/>
        <result column="i_carroof_lock_sensor" jdbcType="INTEGER" property="iCarroofLockSensor"/>
        <result column="v_carroof_lock_sensor_mode" jdbcType="VARCHAR" property="vCarroofLockSensorMode"/>
        <result column="i_room_electricity_sensor" jdbcType="INTEGER" property="iRoomElectricitySensor"/>
        <result column="v_room_electricity_sensor_mode" jdbcType="VARCHAR" property="vRoomElectricitySensorMode"/>
        <result column="i_room_service_sensor" jdbcType="INTEGER" property="iRoomServiceSensor"/>
        <result column="v_room_service_sensor_mode" jdbcType="VARCHAR" property="vRoomServiceSensorMode"/>
        <result column="i_room_switch_sensor" jdbcType="INTEGER" property="iRoomSwitchSensor"/>
        <result column="v_room_switch_sensor_mode" jdbcType="VARCHAR" property="vRoomSwitchSensorMode"/>
        <result column="i_room_call_sensor" jdbcType="INTEGER" property="iRoomCallSensor"/>
        <result column="v_room_call_sensor_mode" jdbcType="VARCHAR" property="vRoomCallSensorMode"/>
        <result column="i_room_safe_sensor" jdbcType="INTEGER" property="iRoomSafeSensor"/>
        <result column="v_room_safe_sensor_mode" jdbcType="VARCHAR" property="vRoomSafeSensorMode"/>
        <result column="i_room_hall_sensor" jdbcType="INTEGER" property="iRoomHallSensor"/>
        <result column="v_room_hall_sensor_mode" jdbcType="VARCHAR" property="vRoomHallSensorMode"/>
        <result column="i_room_switch_circuit_sensor" jdbcType="INTEGER" property="iRoomSwitchCircuitSensor"/>
        <result column="v_room_switch_circuit_sensor_mode" jdbcType="VARCHAR" property="vRoomSwitchCircuitSensorMode"/>
        <result column="i_room_cut_electricity_sensor" jdbcType="VARCHAR" property="iRoomCutElectricitySensor"/>
        <result column="v_room_cut_electricity_sensor_mode" jdbcType="INTEGER"
                property="iRoomCutElectricitySensorMode"/>
        <result column="i_status" jdbcType="INTEGER" property="iStatus"/>
        <result column="dt_create_time" jdbcType="TIMESTAMP" property="dtCreateTime"/>
        <result column="dt_modify_time" jdbcType="TIMESTAMP" property="dtModifyTime"/>
        <result column="v_create_user_id" jdbcType="VARCHAR" property="vCreateUserId"/>
        <result column="v_modify_user_id" jdbcType="VARCHAR" property="vModifyUserId"/>
        <result column="i_network_bridge" jdbcType="INTEGER" property="iNetworkBridge"/>
        <result column="i_network_bridge_count" jdbcType="INTEGER" property="iNetworkBridgeCount"/>
        <result column="v_device_type" jdbcType="VARCHAR" property="vDeviceType"/>
        <result column="i_temp_sensor" jdbcType="INTEGER" property="iTempSensor"/>
        <result column="i_collate_floor_sensor" jdbcType="INTEGER" property="iCollateFloorSensor"/>
        <result column="i_4g_module" jdbcType="INTEGER" property="i4gModule"/>
        <result column="i_4g_module_count" jdbcType="INTEGER" property="i4gModuleCount"/>
    </resultMap>

    <sql id="tableFields">
        `v_distribution_bill_id`
        , `v_distribution_task_id`, `v_project_id`, `v_village_id`,
        `v_elevator_id`, `v_elevator_equipment_id`, `v_distributer_name`, `v_verify_code`,
        `v_elevator_code`, `i_cube_count`, `v_connect_adapter`, `v_connect_mode`, `i_plc_cable`,
        `i_plc_cable_count`, `v_4g_router_mode`, `v_4g_router_ip`, `i_4g_router_count`, `v_4g_router_manufactor`,
        `v_router_mode`, `v_router_ip`, `i_router_count`, `v_router_manufactor`, `v_4g_router_airwire_spec`,
        `v_4g_router_airwire_manufactor`, `i_camera`, `camera_type`, `v_camera_mode`, `v_camera_manufactor`, `v_4g_module_mode`,
        `v_4g_module_manufactor`, `v_iot_network_card`, `v_iot_network_card_operator`, `i_magnet_sensor`,
        `i_magnet_door_count`, `i_temper_sensor_count`, `i_body_sensor`, `v_body_sensor_mode`,floor_sensor_remark,
        `i_floor_sensor`, `v_floor_sensor_workmode`, `v_floor_sensor_mode`, `v_short_cable_length`,
        `v_short_cable_count`, `i_long_cable_length`, `i_long_cable_count`, `v_power_supply`,
        `i_power_supply_count`, `v_power_supply_brand`, `v_patch_borad`, `i_patch_borad_count`,
        `v_patch_borad_brand`, `i_patch_borad_length`, `i_airwire_cover_count`, `i_carroof_electricity_sensor`,
        `v_carroof_electricity_sensor_mode`, `i_carroof_lock_sensor`, `v_carroof_lock_sensor_mode`,
        `i_room_electricity_sensor`, `v_room_electricity_sensor_mode`, `i_room_service_sensor`,
        `v_room_service_sensor_mode`, `i_room_switch_sensor`, `v_room_switch_sensor_mode`,
        `i_room_call_sensor`, `v_room_call_sensor_mode`, `i_room_safe_sensor`, `v_room_safe_sensor_mode`,
        `i_room_hall_sensor`, `v_room_hall_sensor_mode`, `i_room_switch_circuit_sensor`,
        `v_room_switch_circuit_sensor_mode`, `i_room_cut_electricity_sensor`, `v_room_cut_electricity_sensor_mode`, `i_status`,
        `dt_create_time`, `dt_modify_time`, `v_create_user_id`, `v_modify_user_id`, `v_device_type`, `i_network_bridge`, `i_network_bridge_count`,
        `i_temp_sensor`, `i_collate_floor_sensor`, `i_4g_module`, `i_4g_module_count`
    </sql>

    <select id="selectByBillId" parameterType="String" resultMap="BaseResultMap">
        select
        <include refid="tableFields"/>
        from
        tbl_distribution_bill
        where
        v_distribution_bill_id = #{vDistributionBillId}
    </select>

    <select id="selectByTaskId" parameterType="String" resultMap="BaseResultMap">
        select v_elevator_id,
               v_elevator_code,
               v_distribution_bill_id,
               v_distribution_task_id,
               i_status
        from tbl_distribution_bill
        where v_distribution_task_id = #{vDistributionTaskId}
    </select>

    <select id="selectByElevatorId" parameterType="String" resultMap="BaseResultMap">
        select
        <include refid="tableFields"/>
        from
        tbl_distribution_bill
        where
        v_elevator_id = #{vElevatorId}
        and
        i_status != -1
    </select>

    <insert id="insert" parameterType="com.shmashine.pm.api.entity.TblDistributionBill">
        insert into tbl_distribution_bill
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="vDistributionBillId != null">
                `v_distribution_bill_id`,
            </if>
            <if test="vDistributionTaskId != null">
                `v_distribution_task_id`,
            </if>
            <if test="vProjectId != null">
                `v_project_id`,
            </if>
            <if test="vVillageId != null">
                `v_village_id`,
            </if>
            <if test="vElevatorId != null">
                `v_elevator_id`,
            </if>
            <if test="vElevatorEquipmentId != null">
                `v_elevator_equipment_id`,
            </if>
            <if test="vDistributerName != null">
                `v_distributer_name`,
            </if>
            <if test="vVerifyCode != null">
                `v_verify_code`,
            </if>
            <if test="vElevatorCode != null">
                `v_elevator_code`,
            </if>
            <if test="iCubeCount != null">
                `i_cube_count`,
            </if>
            <if test="vConnectAdapter != null">
                `v_connect_adapter`,
            </if>
            <if test="vConnectMode != null">
                `v_connect_mode`,
            </if>
            <if test="iPlcCable != null">
                `i_plc_cable`,
            </if>
            <if test="iPlcCableCount != null">
                `i_plc_cable_count`,
            </if>
            <if test="v4gRouterMode != null">
                `v_4g_router_mode`,
            </if>
            <if test="v4gRouterIp != null">
                `v_4g_router_ip`,
            </if>
            <if test="i4gRouterCount != null">
                `i_4g_router_count`,
            </if>
            <if test="v4gRouterManufactor != null">
                `v_4g_router_manufactor`,
            </if>
            <if test="vRouterMode != null">
                `v_router_mode`,
            </if>
            <if test="vRouterIp != null">
                `v_router_ip`,
            </if>
            <if test="iRouterCount != null">
                `i_router_count`,
            </if>
            <if test="vRouterManufactor != null">
                `v_router_manufactor`,
            </if>
            <if test="v4gRouterAirwireSpec != null">
                `v_4g_router_airwire_spec`,
            </if>
            <if test="v4gRouterAirwireManufactor != null">
                `v_4g_router_airwire_manufactor`,
            </if>
            <if test="iCamera != null">
                `i_camera`,
            </if>
            <if test="vCameraMode != null">
                `v_camera_mode`,
            </if>
            <if test="vCameraManufactor != null">
                `v_camera_manufactor`,
            </if>
            <if test="v4gModuleMode != null">
                `v_4g_module_mode`,
            </if>
            <if test="v4gModuleManufactor != null">
                `v_4g_module_manufactor`,
            </if>
            <if test="vIotNetworkCard != null">
                `v_iot_network_card`,
            </if>
            <if test="vIotNetworkCardOperator != null">
                `v_iot_network_card_operator`,
            </if>
            <if test=" iMagnetSensor != null">
                `i_magnet_sensor`,
            </if>
            <if test="iMagnetDoorCount != null">
                `i_magnet_door_count`,
            </if>
            <if test="iTemperSensorCount != null">
                `i_temper_sensor_count`,
            </if>
            <if test="iBodySensor != null">
                `i_body_sensor`,
            </if>
            <if test="vBodySensorMode != null">
                `v_body_sensor_mode`,
            </if>
            <if test="iFloorSensor != null">
                `i_floor_sensor`,
            </if>
            <if test="vFloorSensorWorkmode != null">
                `v_floor_sensor_workmode`,
            </if>
            <if test="vFloorSensorMode != null">
                `v_floor_sensor_mode`,
            </if>
            <if test="vShortCableLength != null">
                `v_short_cable_length`,
            </if>
            <if test="vShortCableCount != null">
                `v_short_cable_count`,
            </if>
            <if test="iLongCableLength != null">
                `i_long_cable_length`,
            </if>
            <if test="iLongCableCount != null">
                `i_long_cable_count`,
            </if>
            <if test="vPowerSupply != null">
                `v_power_supply`,
            </if>
            <if test="iPowerSupplyCount != null">
                `i_power_supply_count`,
            </if>
            <if test="vPowerSupplyBrand != null">
                `v_power_supply_brand`,
            </if>
            <if test="vPatchBorad != null">
                `v_patch_borad`,
            </if>
            <if test="iPatchBoradCount != null">
                `i_patch_borad_count`,
            </if>
            <if test="vPatchBoradBrand != null">
                `v_patch_borad_brand`,
            </if>
            <if test="iPatchBoradLength != null">
                `i_patch_borad_length`,
            </if>
            <if test="iAirwireCoverCount != null">
                `i_airwire_cover_count`,
            </if>
            <if test="iCarroofElectricitySensor != null">
                `i_carroof_electricity_sensor`,
            </if>
            <if test="vCarroofElectricitySensorMode != null">
                `v_carroof_electricity_sensor_mode`,
            </if>
            <if test="iCarroofLockSensor != null">
                `i_carroof_lock_sensor`,
            </if>
            <if test="vCarroofLockSensorMode != null">
                `v_carroof_lock_sensor_mode`,
            </if>
            <if test="iRoomElectricitySensor != null">
                `i_room_electricity_sensor`,
            </if>
            <if test="vRoomElectricitySensorMode != null">
                `v_room_electricity_sensor_mode`,
            </if>
            <if test="iRoomServiceSensor != null">
                `i_room_service_sensor`,
            </if>
            <if test="vRoomServiceSensorMode != null">
                `v_room_service_sensor_mode`,
            </if>
            <if test="iRoomSwitchSensor != null">
                `i_room_switch_sensor`,
            </if>
            <if test="vRoomSwitchSensorMode != null">
                `v_room_switch_sensor_mode`,
            </if>
            <if test="iRoomCallSensor != null">
                `i_room_call_sensor`,
            </if>
            <if test="vRoomCallSensorMode != null">
                `v_room_call_sensor_mode`,
            </if>
            <if test="iRoomSafeSensor != null">
                `i_room_safe_sensor`,
            </if>
            <if test="vRoomSafeSensorMode != null">
                `v_room_safe_sensor_mode`,
            </if>
            <if test="iRoomHallSensor != null">
                `i_room_hall_sensor`,
            </if>
            <if test="vRoomHallSensorMode != null">
                `v_room_hall_sensor_mode`,
            </if>
            <if test="iRoomSwitchCircuitSensor != null">
                `i_room_switch_circuit_sensor`,
            </if>
            <if test="vRoomSwitchCircuitSensorMode != null">
                `v_room_switch_circuit_sensor_mode`,
            </if>
            <if test="iRoomCutElectricitySensor != null">
                `i_room_cut_electricity_sensor`,
            </if>
            <if test="vRoomCutElectricitySensorMode != null">
                `v_room_cut_electricity_sensor_mode`,
            </if>
            <if test="dtCreateTime != null">
                `dt_create_time`,
            </if>
            <if test="dtModifyTime != null">
                `dt_modify_time`,
            </if>
            <if test="vCreateUserId != null">
                `v_create_user_id`,
            </if>
            <if test="vModifyUserId != null">
                `v_modify_user_id`,
            </if>
            <if test="iNetworkBridge != null">
                `i_network_bridge`,
            </if>
            <if test="iNetworkBridgeCount != null">
                `i_network_bridge_count`,
            </if>
            <if test="vDeviceType != null">
                `v_device_type`,
            </if>
            <if test="iTempSensor != null">
                `i_temp_sensor`,
            </if>
            <if test="iCollateFloorSensor != null">
                `i_collate_floor_sensor`,
            </if>
            <if test="i4gModule != null">
                `i_4g_module`,
            </if>
            <if test="i4gModuleCount != null ">
                `i_4g_module_count`,
            </if>
            <if test="cameraType != null ">
                `camera_type`,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="vDistributionBillId != null">
                #{vDistributionBillId,jdbcType=VARCHAR},
            </if>
            <if test="vDistributionTaskId != null">
                #{vDistributionTaskId,jdbcType=VARCHAR},
            </if>
            <if test="vProjectId != null">
                #{vProjectId,jdbcType=VARCHAR},
            </if>
            <if test="vVillageId != null">
                #{vVillageId,jdbcType=VARCHAR},
            </if>
            <if test="vElevatorId != null">
                #{vElevatorId,jdbcType=VARCHAR},
            </if>
            <if test="vElevatorEquipmentId != null">
                #{vElevatorEquipmentId,jdbcType=VARCHAR},
            </if>
            <if test="vDistributerName != null">
                #{vDistributerName,jdbcType=VARCHAR},
            </if>
            <if test="vVerifyCode != null">
                #{vVerifyCode,jdbcType=VARCHAR},
            </if>
            <if test="vElevatorCode != null">
                #{vElevatorCode,jdbcType=VARCHAR},
            </if>
            <if test="iCubeCount != null">
                #{iCubeCount,jdbcType=BIT},
            </if>
            <if test="vConnectAdapter != null">
                #{vConnectAdapter,jdbcType=VARCHAR},
            </if>
            <if test="vConnectMode != null">
                #{vConnectMode,jdbcType=VARCHAR},
            </if>
            <if test="iPlcCable != null">
                #{iPlcCable,jdbcType=INTEGER},
            </if>
            <if test="iPlcCableCount != null">
                #{iPlcCableCount,jdbcType=INTEGER},
            </if>
            <if test="v4gRouterMode != null">
                #{v4gRouterMode,jdbcType=VARCHAR},
            </if>
            <if test="v4gRouterIp != null">
                #{v4gRouterIp,jdbcType=VARCHAR},
            </if>
            <if test="i4gRouterCount != null">
                #{i4gRouterCount,jdbcType=INTEGER},
            </if>
            <if test="v4gRouterManufactor != null">
                #{v4gRouterManufactor,jdbcType=VARCHAR},
            </if>
            <if test="vRouterMode != null">
                #{vRouterMode,jdbcType=VARCHAR},
            </if>
            <if test="vRouterIp != null">
                #{vRouterIp,jdbcType=VARCHAR},
            </if>
            <if test="iRouterCount != null">
                #{iRouterCount,jdbcType=INTEGER},
            </if>
            <if test="vRouterManufactor != null">
                #{vRouterManufactor,jdbcType=VARCHAR},
            </if>
            <if test="v4gRouterAirwireSpec != null">
                #{v4gRouterAirwireSpec,jdbcType=VARCHAR},
            </if>
            <if test="v4gRouterAirwireManufactor != null">
                #{v4gRouterAirwireManufactor,jdbcType=VARCHAR},
            </if>
            <if test="iCamera != null">
                #{iCamera, jdbcType=INTEGER},
            </if>
            <if test="vCameraMode != null">
                #{vCameraMode,jdbcType=VARCHAR},
            </if>
            <if test="vCameraManufactor != null">
                #{vCameraManufactor,jdbcType=VARCHAR},
            </if>
            <if test="v4gModuleMode != null">
                #{v4gModuleMode,jdbcType=VARCHAR},
            </if>
            <if test="v4gModuleManufactor != null">
                #{v4gModuleManufactor,jdbcType=VARCHAR},
            </if>
            <if test="vIotNetworkCard != null">
                #{vIotNetworkCard,jdbcType=VARCHAR},
            </if>
            <if test="vIotNetworkCardOperator != null">
                #{vIotNetworkCardOperator,jdbcType=VARCHAR},
            </if>
            <if test=" iMagnetSensor != null">
                #{ iMagnetSensor,jdbcType=INTEGER},
            </if>
            <if test="iMagnetDoorCount != null">
                #{iMagnetDoorCount,jdbcType=INTEGER},
            </if>
            <if test="iTemperSensorCount != null">
                #{iTemperSensorCount,jdbcType=INTEGER},
            </if>
            <if test="iBodySensor != null">
                #{iBodySensor,jdbcType=INTEGER},
            </if>
            <if test="vBodySensorMode != null">
                #{vBodySensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iFloorSensor != null">
                #{iFloorSensor,jdbcType=INTEGER},
            </if>
            <if test="vFloorSensorWorkmode != null">
                #{vFloorSensorWorkmode,jdbcType=VARCHAR},
            </if>
            <if test="vFloorSensorMode != null">
                #{vFloorSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="vShortCableLength != null">
                #{vShortCableLength,jdbcType=VARCHAR},
            </if>
            <if test="vShortCableCount != null">
                #{vShortCableCount,jdbcType=VARCHAR},
            </if>
            <if test="iLongCableLength != null">
                #{iLongCableLength,jdbcType=INTEGER},
            </if>
            <if test="iLongCableCount != null">
                #{iLongCableCount,jdbcType=INTEGER},
            </if>
            <if test="vPowerSupply != null">
                #{vPowerSupply,jdbcType=VARCHAR},
            </if>
            <if test="iPowerSupplyCount != null">
                #{iPowerSupplyCount,jdbcType=INTEGER},
            </if>
            <if test="vPowerSupplyBrand != null">
                #{vPowerSupplyBrand,jdbcType=VARCHAR},
            </if>
            <if test="vPatchBorad != null">
                #{vPatchBorad,jdbcType=VARCHAR},
            </if>
            <if test="iPatchBoradCount != null">
                #{iPatchBoradCount,jdbcType=INTEGER},
            </if>
            <if test="vPatchBoradBrand != null">
                #{vPatchBoradBrand,jdbcType=VARCHAR},
            </if>
            <if test="iPatchBoradLength != null">
                #{iPatchBoradLength,jdbcType=INTEGER},
            </if>
            <if test="iAirwireCoverCount != null">
                #{iAirwireCoverCount,jdbcType=INTEGER},
            </if>
            <if test="iCarroofElectricitySensor != null">
                #{iCarroofElectricitySensor,jdbcType=INTEGER},
            </if>
            <if test="vCarroofElectricitySensorMode != null">
                #{vCarroofElectricitySensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iCarroofLockSensor != null">
                #{iCarroofLockSensor,jdbcType=INTEGER},
            </if>
            <if test="vCarroofLockSensorMode != null">
                #{vCarroofLockSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomElectricitySensor != null">
                #{iRoomElectricitySensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomElectricitySensorMode != null">
                #{vRoomElectricitySensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomServiceSensor != null">
                #{iRoomServiceSensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomServiceSensorMode != null">
                #{vRoomServiceSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomSwitchSensor != null">
                #{iRoomSwitchSensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomSwitchSensorMode != null">
                #{vRoomSwitchSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomCallSensor != null">
                #{iRoomCallSensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomCallSensorMode != null">
                #{vRoomCallSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomSafeSensor != null">
                #{iRoomSafeSensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomSafeSensorMode != null">
                #{vRoomSafeSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomHallSensor != null">
                #{iRoomHallSensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomHallSensorMode != null">
                #{vRoomHallSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomSwitchCircuitSensor != null">
                #{iRoomSwitchCircuitSensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomSwitchCircuitSensorMode != null">
                #{vRoomSwitchCircuitSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomCutElectricitySensor != null">
                #{iRoomCutElectricitySensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomCutElectricitySensorMode != null">
                #{vRoomCutElectricitySensorMode,jdbcType=VARCHAR},
            </if>
            <if test="dtCreateTime != null">
                #{dtCreateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="dtModifyTime != null">
                #{dtModifyTime,jdbcType=TIMESTAMP},
            </if>
            <if test="vCreateUserId != null">
                #{vCreateUserId,jdbcType=VARCHAR},
            </if>
            <if test="vModifyUserId != null">
                #{vModifyUserId,jdbcType=VARCHAR},
            </if>
            <if test="iNetworkBridge != null">
                #{iNetworkBridge, jdbcType=INTEGER},
            </if>
            <if test="iNetworkBridgeCount != null">
                #{iNetworkBridgeCount, jdbcType=INTEGER},
            </if>
            <if test="vDeviceType != null">
                #{vDeviceType, jdbcType=VARCHAR},
            </if>
            <if test="iTempSensor != null">
                #{iTempSensor, jdbcType=INTEGER},
            </if>
            <if test="iCollateFloorSensor != null">
                #{iCollateFloorSensor, jdbcType=INTEGER},
            </if>
            <if test="i4gModule != null">
                #{i4gModule, jdbcType=INTEGER},
            </if>
            <if test="i4gModuleCount != null ">
                #{i4gModuleCount, jdbcType=INTEGER},
            </if>
            <if test="cameraType != null ">
                #{cameraType, jdbcType=INTEGER},
            </if>
        </trim>
    </insert>

    <update id="update" parameterType="com.shmashine.pm.api.entity.TblDistributionBill">
        update tbl_distribution_bill
        <set>
            <!--<if test="vDistributionBillId != null">-->
            <!--`v_distribution_bill_id` = #{vDistributionBillId,jdbcType=VARCHAR},-->
            <!--</if>-->
            <if test="vDistributionTaskId != null">
                `v_distribution_task_id` = #{vDistributionTaskId,jdbcType=VARCHAR},
            </if>
            <if test="vProjectId != null">
                `v_project_id` = #{vProjectId,jdbcType=VARCHAR},
            </if>
            <if test="vVillageId != null">
                `v_village_id` = #{vVillageId,jdbcType=VARCHAR},
            </if>
            <if test="vElevatorId != null">
                `v_elevator_id` = #{vElevatorId,jdbcType=VARCHAR},
            </if>
            <if test="vElevatorEquipmentId != null">
                `v_elevator_equipment_id` = #{vElevatorEquipmentId,jdbcType=VARCHAR},
            </if>
            <if test="vDistributerName != null">
                `v_distributer_name` = #{vDistributerName,jdbcType=VARCHAR},
            </if>
            <if test="vVerifyCode != null">
                `v_verify_code` = #{vVerifyCode,jdbcType=VARCHAR},
            </if>
            <if test="vElevatorCode != null">
                `v_elevator_code` = #{vElevatorCode,jdbcType=VARCHAR},
            </if>
            <if test="iCubeCount != null">
                `i_cube_count` = #{iCubeCount,jdbcType=BIT},
            </if>
            <if test="vConnectAdapter != null">
                `v_connect_adapter` = #{vConnectAdapter,jdbcType=VARCHAR},
            </if>
            <if test="vConnectMode != null">
                `v_connect_mode` = #{vConnectMode,jdbcType=VARCHAR},
            </if>
            <if test="iPlcCable != null">
                `i_plc_cable` = #{iPlcCable,jdbcType=INTEGER},
            </if>
            <if test="iPlcCableCount != null">
                `i_plc_cable_count` = #{iPlcCableCount,jdbcType=INTEGER},
            </if>
            <if test="v4gRouterMode != null">
                `v_4g_router_mode` = #{v4gRouterMode,jdbcType=VARCHAR},
            </if>
            <if test="v4gRouterIp != null">
                `v_4g_router_ip` = #{v4gRouterIp,jdbcType=VARCHAR},
            </if>
            <if test="i4gRouterCount != null">
                `i_4g_router_count` = #{i4gRouterCount,jdbcType=INTEGER},
            </if>
            <if test="v4gRouterManufactor != null">
                `v_4g_router_manufactor` = #{v4gRouterManufactor,jdbcType=VARCHAR},
            </if>
            <if test="vRouterMode != null">
                `v_router_mode` = #{vRouterMode,jdbcType=VARCHAR},
            </if>
            <if test="vRouterIp != null">
                `v_router_ip` = #{vRouterIp,jdbcType=VARCHAR},
            </if>
            <if test="iRouterCount != null">
                `i_router_count` = #{iRouterCount,jdbcType=INTEGER},
            </if>
            <if test="vRouterManufactor != null">
                `v_router_manufactor` = #{vRouterManufactor,jdbcType=VARCHAR},
            </if>
            <if test="v4gRouterAirwireSpec != null">
                `v_4g_router_airwire_spec` = #{v4gRouterAirwireSpec,jdbcType=VARCHAR},
            </if>
            <if test="v4gRouterAirwireManufactor != null">
                `v_4g_router_airwire_manufactor` = #{v4gRouterAirwireManufactor,jdbcType=VARCHAR},
            </if>
            <if test="iCamera != null">
                `i_camera` = #{iCamera, jdbcType=INTEGER},
            </if>
            <if test="vCameraMode != null">
                `v_camera_mode` = #{vCameraMode,jdbcType=VARCHAR},
            </if>
            <if test="cameraType != null">
                `camera_type` = #{cameraType,jdbcType=VARCHAR},
            </if>
            <if test="vCameraManufactor != null">
                `v_camera_manufactor` = #{vCameraManufactor,jdbcType=VARCHAR},
            </if>
            <if test="v4gModuleMode != null">
                `v_4g_module_mode` = #{v4gModuleMode,jdbcType=VARCHAR},
            </if>
            <if test="v4gModuleManufactor != null">
                `v_4g_module_manufactor` = #{v4gModuleManufactor,jdbcType=VARCHAR},
            </if>
            <if test="vIotNetworkCard != null">
                `v_iot_network_card` = #{vIotNetworkCard,jdbcType=VARCHAR},
            </if>
            <if test="vIotNetworkCardOperator != null">
                `v_iot_network_card_operator` = #{vIotNetworkCardOperator,jdbcType=VARCHAR},
            </if>
            <if test=" iMagnetSensor != null">
                `i_magnet_sensor` = #{ iMagnetSensor,jdbcType=INTEGER},
            </if>
            <if test="iMagnetDoorCount != null">
                `i_magnet_door_count` = #{iMagnetDoorCount,jdbcType=INTEGER},
            </if>
            <if test="iTemperSensorCount != null">
                `i_temper_sensor_count` = #{iTemperSensorCount,jdbcType=INTEGER},
            </if>
            <if test="iBodySensor != null">
                `i_body_sensor` = #{iBodySensor,jdbcType=INTEGER},
            </if>
            <if test="vBodySensorMode != null">
                `v_body_sensor_mode` = #{vBodySensorMode,jdbcType=VARCHAR},
            </if>
            <if test="floorSensorRemark != null">
                `floor_sensor_remark` = #{floorSensorRemark,jdbcType=INTEGER},
            </if>
            <if test="iFloorSensor != null">
                `i_floor_sensor` = #{iFloorSensor,jdbcType=INTEGER},
            </if>
            <if test="vFloorSensorWorkmode != null">
                `v_floor_sensor_workmode` = #{vFloorSensorWorkmode,jdbcType=VARCHAR},
            </if>
            <if test="vFloorSensorMode != null">
                `v_floor_sensor_mode` = #{vFloorSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="vShortCableLength != null">
                `v_short_cable_length` = #{vShortCableLength,jdbcType=VARCHAR},
            </if>
            <if test="vShortCableCount != null">
                `v_short_cable_count` = #{vShortCableCount,jdbcType=VARCHAR},
            </if>
            <if test="iLongCableLength != null">
                `i_long_cable_length` = #{iLongCableLength,jdbcType=INTEGER},
            </if>
            <if test="iLongCableCount != null">
                `i_long_cable_count` = #{iLongCableCount,jdbcType=INTEGER},
            </if>
            <if test="vPowerSupply != null">
                `v_power_supply` = #{vPowerSupply,jdbcType=VARCHAR},
            </if>
            <if test="iPowerSupplyCount != null">
                `i_power_supply_count` = #{iPowerSupplyCount,jdbcType=INTEGER},
            </if>
            <if test="vPowerSupplyBrand != null">
                `v_power_supply_brand` = #{vPowerSupplyBrand,jdbcType=VARCHAR},
            </if>
            <if test="vPatchBorad != null">
                `v_patch_borad` = #{vPatchBorad,jdbcType=VARCHAR},
            </if>
            <if test="iPatchBoradCount != null">
                `i_patch_borad_count` = #{iPatchBoradCount,jdbcType=VARCHAR},
            </if>
            <if test="vPatchBoradBrand != null">
                `v_patch_borad_brand` = #{vPatchBoradBrand,jdbcType=VARCHAR},
            </if>
            <if test="iPatchBoradLength != null">
                `i_patch_borad_length` = #{iPatchBoradLength,jdbcType=INTEGER},
            </if>
            <if test="iAirwireCoverCount != null">
                `i_airwire_cover_count` = #{iAirwireCoverCount,jdbcType=INTEGER},
            </if>
            <if test="iCarroofElectricitySensor != null">
                `i_carroof_electricity_sensor` = #{iCarroofElectricitySensor,jdbcType=INTEGER},
            </if>
            <if test="vCarroofElectricitySensorMode != null">
                `v_carroof_electricity_sensor_mode` = #{vCarroofElectricitySensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iCarroofLockSensor != null">
                `i_carroof_lock_sensor` = #{iCarroofLockSensor,jdbcType=INTEGER},
            </if>
            <if test="vCarroofLockSensorMode != null">
                `v_carroof_lock_sensor_mode` = #{vCarroofLockSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomElectricitySensor != null">
                `i_room_electricity_sensor` = #{iRoomElectricitySensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomElectricitySensorMode != null">
                `v_room_electricity_sensor_mode` = #{vRoomElectricitySensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomServiceSensor != null">
                `i_room_service_sensor` = #{iRoomServiceSensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomServiceSensorMode != null">
                `v_room_service_sensor_mode` = #{vRoomServiceSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomSwitchSensor != null">
                `i_room_switch_sensor` = #{iRoomSwitchSensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomSwitchSensorMode != null">
                `v_room_switch_sensor_mode` = #{vRoomSwitchSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomCallSensor != null">
                `i_room_call_sensor` = #{iRoomCallSensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomCallSensorMode != null">
                `v_room_call_sensor_mode` = #{vRoomCallSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomSafeSensor != null">
                `i_room_safe_sensor` = #{iRoomSafeSensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomSafeSensorMode != null">
                `v_room_safe_sensor_mode` = #{vRoomSafeSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomHallSensor != null">
                `i_room_hall_sensor` = #{iRoomHallSensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomHallSensorMode != null">
                `v_room_hall_sensor_mode` = #{vRoomHallSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomSwitchCircuitSensor != null">
                `i_room_switch_circuit_sensor` = #{iRoomSwitchCircuitSensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomSwitchCircuitSensorMode != null">
                `v_room_switch_circuit_sensor_mode` = #{vRoomSwitchCircuitSensorMode,jdbcType=VARCHAR},
            </if>
            <if test="iRoomCutElectricitySensor != null">
                `i_room_cut_electricity_sensor` = #{iRoomCutElectricitySensor,jdbcType=INTEGER},
            </if>
            <if test="vRoomCutElectricitySensorMode != null">
                `v_room_cut_electricity_sensor_mode` = #{vRoomCutElectricitySensorMode,jdbcType=VARCHAR},
            </if>
            <if test="dtCreateTime != null">
                `dt_create_time` = #{dtCreateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="dtModifyTime != null">
                `dt_modify_time` = #{dtModifyTime,jdbcType=TIMESTAMP},
            </if>
            <if test="vModifyUserId != null">
                `v_modify_user_id` = #{vModifyUserId,jdbcType=VARCHAR},
            </if>
            <if test="iStatus != null">
                `i_status` = #{iStatus, jdbcType=INTEGER},
            </if>
            <if test="iNetworkBridge != null">
                `i_network_bridge` = #{iNetworkBridge,jdbcType=INTEGER},
            </if>
            <if test="iNetworkBridgeCount != null">
                `i_network_bridge_count` = #{iNetworkBridgeCount,jdbcType=INTEGER},
            </if>
            <if test="vDeviceType != null">
                `v_device_type` = #{vDeviceType, jdbcType=VARCHAR},
            </if>
            <if test="iTempSensor != null">
                i_temp_sensor = #{iTempSensor, jdbcType=INTEGER},
            </if>
            <if test="iCollateFloorSensor != null">
                i_collate_floor_sensor = #{iCollateFloorSensor, jdbcType=INTEGER},
            </if>
            <if test="i4gModule != null">
                i_4g_module = #{i4gModule, jdbcType=INTEGER},
            </if>
            <if test="i4gModuleCount != null ">
                i_4g_module_count = #{i4gModuleCount, jdbcType=INTEGER},
            </if>
        </set>
        where `v_distribution_bill_id` = #{vDistributionBillId,jdbcType=VARCHAR }
    </update>

    <select id="selectByBillModule" parameterType="com.shmashine.pm.api.module.distributionBill.DistributionBillModule"
            resultType="Map">
        select
        bill.v_distribution_bill_id,
        bill.v_distribution_task_id,
        bill.v_elevator_id,
        bill.v_elevator_code,
        case
        when bill.i_status = 1 then "配货中"
        when bill.i_status = 2 then "已配货"
        when bill.i_status = -1 then "已取消"
        else "无"
        end as v_status_name,
        bill.i_status as i_status,
        elevator.v_elevator_name,
        elevator.v_address,
        elevator.v_equipment_code,
        elevator.i_elevator_type,
        elevator.v_elevator_id,
        brand.v_elevator_brand_name,
        case
        when elevator.i_elevator_type = 1 then "直梯"
        when elevator.i_elevator_type = 2 then "扶梯"
        else "直梯"
        end as v_elevator_type_name
        from
        tbl_distribution_bill as bill
        inner join
        tbl_elevator as elevator on bill.v_elevator_id = elevator.v_elevator_id
        left join
        tbl_elevator_brand brand on brand.v_elevator_brand_id = elevator.v_elevator_brand_id
        <where>
            <if test="vElevatorId != null and vElevatorId !=''">
                and bill.v_elevator_id = #{vElevatorId}
            </if>
            <if test="vDistributionTaskId != null and vDistributionTaskId != ''">
                and bill.v_distribution_task_id = #{vDistributionTaskId}
            </if>
            <if test="vDistributionBillId != null and vDistributionBillId != ''">
                and bill.v_distribution_bill_id = #{vDistributionBillId}
            </if>
            <if test="vElevatorCode != null and vElevatorCode != ''">
                and bill.v_elevator_code = #{vElevatorCode}
            </if>
            <if test="iStatus != null">
                and bill.i_status = #{iStatus}
            </if>
        </where>
    </select>

    <select id="getRelatedInfo" parameterType="String" resultType="Map">
        select dept.v_dept_name          as vDeptName,
               project.v_project_name    as vProjectName,
               village.v_village_name    as vVillageName,
               elevator.v_elevator_name  as vElevatorName,
               elevator.v_elevator_code  as vElevatorCode,
               elevator.v_equipment_code as vEquipmentCode
        from tbl_distribution_bill as bill
                 inner join
             tbl_distribution_task as task on task.v_distribution_task_id = bill.v_distribution_task_id
                 inner join
             tbl_village as village on village.v_village_id = bill.v_village_id
                 inner join
             tbl_elevator as elevator on elevator.v_elevator_id = bill.v_elevator_id
                 inner join
             tbl_project as project on project.v_project_id = bill.v_project_id
                 inner join
             tbl_sys_dept as dept on dept.v_dept_id = project.v_dept_id
        where bill.v_distribution_bill_id = #{vDistributionBillId}
    </select>

    <select id="getAllStatus" resultType="java.lang.Integer">
        select
        i_status
        from
        tbl_distribution_bill
        <where>
            <if test="vDistributionTaskId != null and vDistributionTaskId != ''">
                and v_distribution_task_id = #{vDistributionTaskId}
            </if>

            <if test="vVillageId != null and vVillageId != ''">
                and v_village_id = #{vVillageId}
            </if>
        </where>
    </select>

    <select id="existVerifyCode" resultType="int">
        select ifnull(count(1), 0)
        from tbl_distribution_bill tbl
        where tbl.v_verify_code = #{vVerifyCode}
          and tbl.v_distribution_task_id = #{vDistributionTaskId}
          and tbl.i_status = 2
    </select>

    <update id="updateByTaskId" parameterType="java.lang.String">
        update
            tbl_distribution_bill
        set i_status = 2
        where v_distribution_task_id = #{vDistributionTaskId}
    </update>
</mapper>
